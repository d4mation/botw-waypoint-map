<html>
	<head>
		<title>Zelda: Breath of the Wild Waypoint Map</title>
		<script src='jquery-1.12.0.min.js'></script>
		<script src='map_locations.js'></script>
		<style>
		#container {
			position: relative;
		}
		.waypoint {
			position: absolute;
			background: orange;
			border: 1px solid red;
			color: red;
			width: 10px;
			height: 10px;
			border-radius: 50%;
			transform: translate(-5px,-5px);
		}
		.waypoint.korok {

			background: lime;
			border: 1px solid green;
			color: green;

		}
		.waypoint.warp {
			border-radius: 0;
			background: cyan;
			border: 1px solid blue;
			color: blue;
			transform: translate(-2px,0px) rotate(45deg);
			transform-origin: top right;
		}
		.waypoint:hover {
			cursor: pointer;
		}
		.waypoint:hover:after {
			content: attr(data-display_name);
			display: inline-block;
			position: relative;
			background: inherit;
			border: inherit;
			width: auto;
			height: auto;
			font-size: initial;
			z-index: 1000;
			border-radius: 0%;
			white-space: nowrap;
			padding: 0px 2px 0px 2px;
		}
		.waypoint.warp:hover:after {
			transform: rotate(-45deg);
			transform-origin: 0;
		}
		</style>
	</head>
	<body>
		<div id='container'>
			<img src='BotW-Map.png'/>
		</div>
		<div><a href="https://mrcheeze.github.io/">https://mrcheeze.github.io/</a></div>
		<script>

			/**
			 * Adapted from https://stackoverflow.com/a/55963590
			 */
			function lineDraw( korokId, x1, y1, x2, y2 ) {

				if ( x2 < x1 ) {
					tmp = x2; x2 = x1; x1 = tmp;
					tmp = y2; y2 = y1; y1 = tmp;
				}

				lineLength = Math.sqrt( Math.pow( x2 - x1, 2 ) + Math.pow( y2 - y1, 2 ) );
				m = (y2 - y1) / (x2 - x1)

				degree = Math.atan( m ) * 180 / Math.PI

				return "<div class='line "+ korokId + "' style='transform-origin: top left; transform: rotate(" + degree + "deg); width: " + lineLength + "px; height: 3px; background: white; position: absolute; top: " + y1 + "px; left: " + x1 + "px;'></div>"

			}

			for ( var korokId in korokPaths ) {

				for ( index in korokPaths[ korokId ].points ) {

					// Skip the first point. We need 2 points to draw a line
					if ( index == 0 ) continue;

					let x1 = korokPaths[ korokId ].points[ index - 1 ].x,
						y1 = korokPaths[ korokId ].points[ index - 1 ].y,
						x2 = korokPaths[ korokId ].points[ index ].x,
						y2 = korokPaths[ korokId ].points[ index ].y;

					let line = lineDraw( korokId, ( 3000 + x1/2 ), ( 2500 + y1/2 ), ( 3000 + x2/2 ), ( 2500 + y2/2 ) );

					$('#container').append( line );

				}

			}

			for (var hash in locations ) {
				$('#container').append('<div class="waypoint lotation" style="left: ' + (3000 + locations[hash].x/2) + '; top: ' + (2500 + locations[hash].y/2) + '" data-display_name="' + locations[hash].display_name + '">' + '</div>');
			}
			for (var hash in koroks ) {
				$('#container').append('<div class="waypoint korok" style="left: ' + (3000 + koroks[hash].x/2) + '; top: ' + (2500 + koroks[hash].y/2) + '" data-display_name="' + koroks[hash].display_name + '">' + '</div>');
			}
			for (var hash in warps ) {
				$('#container').append('<div class="waypoint warp" style="left: ' + (3000 + warps[hash].x/2) + '; top: ' + (2500 + warps[hash].y/2) + '" data-display_name="' + warps[hash].display_name + '">' + '</div>');
			}
		</script>
	</body>
</html>
